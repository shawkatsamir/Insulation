!function(){"use strict";const t={html:document.documentElement,callButton:document.querySelector(".btn-call"),callButtonIcon:document.querySelector(".btn-call .btn-call__icon"),langSwitcher:document.getElementById("lang-switcher"),header:{logo:document.querySelector("[data-key='header.logo']"),links:document.querySelectorAll("[data-key='header.links']")},hero:{title:document.querySelector("[data-key='hero.title']"),subtitle:document.querySelector("[data-key='hero.subtitle']")},trustItems:document.querySelectorAll(".hero-trust__item span"),contactButtons:{call:document.querySelectorAll("[data-key='contact.buttons.callBtn']"),whatsapp:document.querySelectorAll("[data-key='contact.buttons.whatsappBtn']")},locations:{heroLocations:document.querySelectorAll("[data-key='locations.hero.list']"),contactLocations:document.querySelectorAll("[data-key='locations.contact.list']"),heading:document.querySelectorAll("[data-key='locations.heading']"),footer:document.querySelectorAll("[data-key='locations.footerText']")},services:{header:{name:document.querySelector("[data-key='services.header.name']"),title:document.querySelector("[data-key='services.header.title']"),subtitle:document.querySelector("[data-key='services.header.subtitle']")},cards:document.querySelectorAll(".service-card")},whyUs:{header:{name:document.querySelector("[data-key='whyUs.header.name']"),title:document.querySelector("[data-key='whyUs.header.title']"),subtitle:document.querySelector("[data-key='whyUs.header.subtitle']")},items:document.querySelectorAll(".why-us__item")},contactUs:{header:{name:document.querySelector("[data-key='contact.header.name']"),subtitle:document.querySelector("[data-key='contact.header.subtitle']")},labels:{phone:document.querySelector("[data-key='contact_us.contactInfo.phoneLabel']"),whatsapp:document.querySelector("[data-key='contact_us.contactInfo.whatsappLabel']"),email:document.querySelector("[data-key='contact_us.contactInfo.emailLabel']")},locations:{locationsArea:document.querySelectorAll(".locations-list li"),heading:document.querySelectorAll("[data-key='locations.heading']"),footer:document.querySelectorAll("[data-key='locations.footerText']")},trustItems:document.querySelectorAll(".hero-trust--contact span")},footer:{footerAboutName:document.querySelector(".footer__name"),footerAboutDesc:document.querySelector(".footer__desc"),quickLinksTitle:document.querySelector(".footer__section:nth-child(2) .footer__title"),quickLinksHome:document.querySelector(".footer__section:nth-child(2) .footer__links li:nth-child(1) a"),quickLinksServices:document.querySelector(".footer__section:nth-child(2) .footer__links li:nth-child(2) a"),quickLinksWhyUs:document.querySelector(".footer__section:nth-child(2) .footer__links li:nth-child(3) a"),quickLinksContact:document.querySelector(".footer__section:nth-child(2) .footer__links li:nth-child(4) a"),ourServicesTitle:document.querySelector(".footer__section:nth-child(3) .footer__title"),ourServicesRoof:document.querySelector(".footer__section:nth-child(3) .footer__links li:nth-child(1) a"),ourServicesLeak:document.querySelector(".footer__section:nth-child(3) .footer__links li:nth-child(2) a"),ourServicesTank:document.querySelector(".footer__section:nth-child(3) .footer__links li:nth-child(3) a"),ourServicesBathroom:document.querySelector(".footer__section:nth-child(3) .footer__links li:nth-child(4) a"),contactUsTitle:document.querySelector(".footer__section:nth-child(4) .footer__title"),contactUsPhone:document.querySelector(".footer__contact li:nth-child(1) a"),contactUsWhatsapp:document.querySelector(".footer__contact li:nth-child(2) a"),contactUsEmail:document.querySelector(".footer__contact li:nth-child(3) a"),bottomBarCopyright:document.querySelector(".footer-bottom p"),bottomBarLangToggle:document.querySelector(".footer-bottom__lang-toggle button")},schema:document.getElementById("schema-data")};let e={};const o=(t,e)=>{t&&void 0!==e&&(t.textContent=e)};function n(n){t.html.setAttribute("lang",n),t.html.setAttribute("dir","ar"===n?"rtl":"ltr"),localStorage.setItem("preferred-lang",n),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{lang:n}})),function(n){if(!e[n])return;const a=e[n];if(o(t.header.logo,a.header.logo),o(t.hero.title,a.hero.title),o(t.hero.subtitle,a.hero.subtitle),o(t.services.header.name,a.services.header.name),o(t.services.header.title,a.services.header.title),o(t.services.header.subtitle,a.services.header.subtitle),o(t.whyUs.header.name,a.whyUs.header.name),o(t.whyUs.header.title,a.whyUs.header.title),o(t.whyUs.header.subtitle,a.whyUs.header.subtitle),o(t.contactUs.header.name,a.contact_us.header.name),o(t.contactUs.header.subtitle,a.contact_us.header.subtitle),o(t.contactUs.labels.phone,a.contact_us.contactInfo.phoneLabel),o(t.contactUs.labels.whatsapp,a.contact_us.contactInfo.whatsappLabel),o(t.contactUs.labels.email,a.contact_us.contactInfo.emailLabel),t.contactButtons.call.forEach(t=>o(t,a.contact.callBtn)),t.contactButtons.whatsapp.forEach(t=>o(t,a.contact.whatsappBtn)),t.header.links.forEach((t,e)=>o(t,a.header.links[e])),t.trustItems.forEach((t,e)=>o(t,a.hero.trustItems[e]?.text)),t.contactUs.trustItems.forEach((t,e)=>o(t,a.contact_us.trustItems[e]?.text)),o(t.contactUs.labels.phone,a.contact_us.contactInfo.phoneLabel),t.locations.heading.forEach(t=>o(t,a.locations.heading)),t.locations.footer.forEach(t=>o(t,a.locations.footerText)),t.locations.heroLocations.forEach((t,e)=>o(t,a.locations.hero.list[e])),t.locations.contactLocations.forEach((t,e)=>o(t,a.locations.contact.list[e])),t.services.cards.forEach((t,e)=>{const n=a.services.cards[e];n&&(o(t.querySelector(".service-card__title"),n.title),o(t.querySelector(".services-card__subtitle"),n.subtitle),t.querySelectorAll(".service-card__features-item span").forEach((t,e)=>{o(t,n.features[e])}))}),t.whyUs.items.forEach((t,e)=>{const n=a.whyUs.items[e];n&&(o(t.querySelector(".why-us__item-title"),n.title),o(t.querySelector(".why-us__item-text"),n.text))}),o(t.footer.footerAboutName,a.footer.about.name),o(t.footer.footerAboutDesc,a.footer.about.description),o(t.footer.quickLinksTitle,a.footer.quickLinks.title),o(t.footer.quickLinksHome,a.footer.quickLinks.home),o(t.footer.quickLinksServices,a.footer.quickLinks.services),o(t.footer.quickLinksWhyUs,a.footer.quickLinks.whyUs),o(t.footer.quickLinksContact,a.footer.quickLinks.contact),o(t.footer.ourServicesTitle,a.footer.ourServices.title),o(t.footer.ourServicesRoof,a.footer.ourServices.roofInsulation),o(t.footer.ourServicesLeak,a.footer.ourServices.leakDetection),o(t.footer.ourServicesTank,a.footer.ourServices.tankInsulation),o(t.footer.ourServicesBathroom,a.footer.ourServices.bathroomWaterproofing),o(t.footer.contactUsTitle,a.footer.contactUs.title),o(t.footer.contactUsPhone,a.footer.contactUs.phone),o(t.footer.contactUsWhatsapp,a.footer.contactUs.whatsapp),o(t.footer.contactUsEmail,a.footer.contactUs.email),o(t.footer.bottomBarCopyright,a.footer.bottomBar.copyright),o(t.footer.bottomBarLangToggle,a.footer.bottomBar.languageToggle),t.schema)try{const e=JSON.parse(t.schema.textContent);e.name=a.hero.title,e.description=a.hero.subtitle,t.schema.textContent=JSON.stringify(e,null,2)}catch(t){console.error("Failed to parse or update schema data.",t)}}(n)}function a(){n("ar"===(t.html.getAttribute("lang")||"ar")?"en":"ar")}async function c(){await async function(){try{const t=await fetch("./data/translation.json");e=await t.json()}catch(t){console.error("Failed to load translations:",t)}}();const o=localStorage.getItem("preferred-lang"),c=(navigator.language||navigator.userLanguage).startsWith("ar");n(o||(c?"ar":"en")),t.callButton&&t.callButton.addEventListener("click",()=>{t.callButtonIcon&&(t.callButtonIcon.style.animation="vibrate .3s",setTimeout(()=>{t.callButtonIcon.style.animation=""},300))}),t.langSwitcher&&t.langSwitcher.addEventListener("click",a)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}(),function(){"use strict";const t={postsContainer:document.getElementById("posts-container")};async function e(e="ar"){try{const o=await fetch("data/blogPost.json");if(!o.ok)throw new Error("Failed to load blog posts");const n=await o.json(),a=n[e]||n.ar;t.postsContainer.innerHTML="",a.forEach(o=>{const n=((t,e)=>{const o=document.createElement("article");o.className="post-card",o.dataset.postId=t.id;const n=document.createElement("h2");n.dataset.key=`post.${t.id}.title`;const a=document.createElement("a");a.href=`post.html?id=${t.id}&lang=${e}`,a.textContent=t.postInfo.title,n.appendChild(a);const c=document.createElement("p");c.className="post-meta",c.innerHTML=`By <span data-key="post.${t.id}.author">${t.postInfo.author}</span> on <span data-key="post.${t.id}.date">${t.postInfo.date}</span>`;const r=document.createElement("p");r.dataset.key=`post.${t.id}.summary`,r.textContent=t.postInfo.summary;const s=document.createElement("a");return s.href=`post.html?id=${t.id}&lang=${e}`,s.className="read-more",s.textContent="Read More",o.appendChild(n),o.appendChild(c),o.appendChild(r),o.appendChild(s),o})(o,e);t.postsContainer.appendChild(n)})}catch(t){console.error("Error loading blog posts:",t)}}document.addEventListener("DOMContentLoaded",()=>{e(localStorage.getItem("preferred-lang")||"ar")})}(),function(){"use strict";const t={html:document.documentElement,postTitle:document.querySelector(".post-title"),postAuthor:document.querySelector(".post-author"),postDate:document.querySelector(".post-date"),postDateEl:document.querySelector(".post-date"),featuredImage:document.querySelector(".post-featured-image img"),canonicalLink:document.querySelector("link[rel='canonical']"),section1:{heading:document.querySelector('[data-key="post.body.section1.heading"]'),paragraph:document.querySelector('[data-key="post.body.section1.paragraph"]')},section2:{heading:document.querySelector('[data-key="post.body.section2.heading"]'),paragraph:document.querySelector('[data-key="post.body.section2.paragraph"]'),steps:[{title:document.querySelector('[data-key="post.body.section2.steps[0].title"]'),description:document.querySelector('[data-key="post.body.section2.steps[0].description"]')},{title:document.querySelector('[data-key="post.body.section2.steps[1].title"]'),description:document.querySelector('[data-key="post.body.section2.steps[1].description"]')},{title:document.querySelector('[data-key="post.body.section2.steps[2].title"]'),description:document.querySelector('[data-key="post.body.section2.steps[2].description"]')}]},section3:{heading:document.querySelector('[data-key="post.body.section3.heading"]'),paragraph:document.querySelector('[data-key="post.body.section3.paragraph"]'),materials:[{title:document.querySelector('[data-key="post.body.section3.materials[0].title"]'),description:document.querySelector('[data-key="post.body.section3.materials[0].description"]')},{title:document.querySelector('[data-key="post.body.section3.materials[1].title"]'),description:document.querySelector('[data-key="post.body.section3.materials[1].description"]')}]},structuredData:document.getElementById("structured-data")},e=(t,e)=>{t&&void 0!==e&&(t.textContent=e)},o=(t,e,o)=>{t&&void 0!==o&&t.setAttribute(e,o)};async function n(n="ar"){try{const a=new URLSearchParams(window.location.search),c=parseInt(a.get("id")),r=a.get("lang")||n;if(!c)return void(document.querySelector(".post-full").innerHTML='<p class="error-message">رقم المقال غير صحيح</p>');const[s,i]=await Promise.all([fetch("/data/blogPost.json"),fetch(`/data/posts/${c}.json`)]);if(!s.ok||!i.ok)throw new Error("فشل تحميل بيانات المقال");const l=await s.json(),d=await i.json(),u=l[r]?.find(t=>t.id===c),h=d[r];if(!u||!h)throw new Error(`بيانات المقال غير متوفرة للغة ${r}`);t.html.setAttribute("lang",r),t.html.setAttribute("dir","ar"===r?"rtl":"ltr"),function(e,o,n){const a=` https://www.insulmakkah.com /post.html?id=${o}&lang=${n}`,c=e.postInfo.summary;document.title=e.postInfo.title,document.querySelector('meta[name="description"]').setAttribute("content",c),document.querySelector('meta[property="og:title"]').setAttribute("content",e.postInfo.title),document.querySelector('meta[property="og:description"]').setAttribute("content",c),document.querySelector('meta[property="og:image"]').setAttribute("content",e.media.imageUrl),document.querySelector('meta[property="og:url"]').setAttribute("content",a),t.canonicalLink&&t.canonicalLink.setAttribute("href",a)}(h,c,r),function(e,o,n){if(!t.structuredData)return;const a={"@context":"https://schema.org ","@type":"BlogPosting",headline:e.postInfo.title,description:e.postInfo.summary,url:`https://www.insulmakkah.com/post.html?id=${o}&lang=${n}`,datePublished:e.postInfo.date,dateModified:e.postInfo.date,image:e.media.imageUrl,author:{"@type":"Organization",name:e.postInfo.author},publisher:{"@type":"Organization",name:"عوازل مكة",logo:{"@type":"ImageObject",url:" https://www.insulmakkah.com/imgs/logo.png "}},mainEntityOfPage:{"@type":"WebPage","@id":`https://www.insulmakkah.com/post.html?id=${o}&lang=${n}`}};t.structuredData.textContent=JSON.stringify(a,null,2)}(h,c,r),e(t.postTitle,h.postInfo.title),e(t.postAuthor,h.postInfo.author),e(t.postDate,h.postInfo.date),o(t.postDateEl,"datetime",h.postInfo.date),o(t.featuredImage,"src",h.media.imageUrl),o(t.featuredImage,"alt",h.media.imageAlt),e(t.section1.heading,h.body.section1.heading),e(t.section1.paragraph,h.body.section1.paragraph),e(t.section2.heading,h.body.section2.heading),e(t.section2.paragraph,h.body.section2.paragraph),e(t.section2.steps[0].title,h.body.section2.steps[0].title),e(t.section2.steps[0].description,h.body.section2.steps[0].description),e(t.section2.steps[1].title,h.body.section2.steps[1].title),e(t.section2.steps[1].description,h.body.section2.steps[1].description),e(t.section2.steps[2].title,h.body.section2.steps[2].title),e(t.section2.steps[2].description,h.body.section2.steps[2].description),e(t.section3.heading,h.body.section3.heading),e(t.section3.paragraph,h.body.section3.paragraph),e(t.section3.materials[0].title,h.body.section3.materials[0].title),e(t.section3.materials[0].description,h.body.section3.materials[0].description),e(t.section3.materials[1].title,h.body.section3.materials[1].title),e(t.section3.materials[1].description,h.body.section3.materials[1].description)}catch(t){console.error("Error loading post content:",t),document.querySelector(".post-full").innerHTML='<p class="error-message">تعذر تحميل المقال</p>'}}window.addEventListener("languageChanged",t=>{new URLSearchParams(window.location.search).get("id")&&n(t.detail.lang)}),document.addEventListener("DOMContentLoaded",()=>{n(localStorage.getItem("preferred-lang")||"ar")})}(),document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".header"),e=document.querySelector(".button-mobile__toggle"),o=document.querySelector(".header-navbar__links"),n=document.querySelector(".sticky-buttons"),a=document.querySelectorAll(".section");e&&t&&e.addEventListener("click",function(){t.classList.toggle("nav-open");const o=t.classList.contains("nav-open");e.setAttribute("aria-expanded",o)}),o&&t&&o.addEventListener("click",function(o){!o.target.closest("a")||window.innerWidth>768||t.classList.contains("nav-open")&&(t.classList.remove("nav-open"),e?.setAttribute("aria-expanded","false"))}),o&&o.addEventListener("click",function(t){const e=t.target.closest("a");if(!e||!e.hash||"#"===e.hash)return;t.preventDefault();const o=e.hash,n=document.querySelector(o);n&&setTimeout(()=>{n.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",o)},50)});const c=new IntersectionObserver(function(t,e){const[o]=t;o.isIntersecting&&(o.target.classList.remove("section--hidden"),e.unobserve(o.target))},{threshold:.15,rootMargin:"0px 0px -100px 0px"});a.forEach(t=>{t.classList.add("section--hidden"),c.observe(t)});const r=[document.querySelector(".hero"),document.querySelector(".contact-us"),document.querySelector(".footer")],s=new IntersectionObserver(t=>{let e=!1;t.forEach(t=>{t.isIntersecting&&(e=!0)}),e?n?.classList.remove("show"):n?.classList.add("show")},{threshold:.2});r.forEach(t=>{t&&s.observe(t)}),window.addEventListener("load",()=>{document.body.style.overflow="",t.classList.contains("nav-open")&&t.classList.remove("nav-open")});const i=document.querySelector(".btn-back-to-top");i&&(window.addEventListener("scroll",function(){window.scrollY>300?i.classList.add("show"):i.classList.remove("show")}),i.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))});